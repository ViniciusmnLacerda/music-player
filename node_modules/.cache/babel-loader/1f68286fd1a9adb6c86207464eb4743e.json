{"ast":null,"code":"var _jsxFileName = \"/home/viniciuslacerda/Dev/projects/Bloco 12 - TrybeTunes/music-player/src/components/MusicCard.jsx\";\n\n/* eslint-disable consistent-return */\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MusicCard extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false,\n      favorites: []\n    };\n    this.onClickCheckbox = this.onClickCheckbox.bind(this);\n  }\n\n  async componentDidMount() {\n    const recovered = await getFavoriteSongs();\n    this.setState({\n      favorites: recovered\n    });\n  }\n\n  async onClickCheckbox(music) {\n    const {\n      favorites\n    } = this.state;\n\n    if (favorites.some(song => song.trackId === music.trackId)) {\n      this.setState({\n        loading: true\n      });\n      await removeSong(music);\n      const newFavorites = favorites.filter(element => element.trackId !== music.trackId);\n      return this.setState({\n        loading: false,\n        favorites: newFavorites\n      });\n    }\n\n    this.setState({\n      loading: true\n    }, async () => {\n      await addSong(music);\n      this.setState({\n        loading: false,\n        favorites: [...favorites, music]\n      });\n    });\n  }\n\n  render() {\n    const {\n      musics\n    } = this.props;\n    const {\n      loading,\n      favorites\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"musics-container\",\n      children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"tracklist\",\n        children: musics.map(music => {\n          const {\n            trackName,\n            trackId,\n            previewUrl\n          } = music;\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"track\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"track-name\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: trackName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n              \"data-testid\": \"audio-component\",\n              src: previewUrl,\n              controls: true,\n              children: [/*#__PURE__*/_jsxDEV(\"track\", {\n                kind: \"captions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 21\n              }, this), \"O seu navegador n\\xE3o suporta o elemento\", /*#__PURE__*/_jsxDEV(\"code\", {\n                children: \"audio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"isFavorite\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"track-input\",\n                \"data-testid\": `checkbox-music-${trackId}`,\n                type: \"checkbox\",\n                name: \"isFavorite\",\n                id: \"isFavorite\",\n                checked: favorites.some(song => song.trackId === trackId),\n                onChange: () => this.onClickCheckbox(music)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 19\n            }, this)]\n          }, trackId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nMusicCard.propTypes = {\n  musics: PropTypes.arrayOf(PropTypes.shape({\n    artistId: PropTypes.number.isRequired\n  }).isRequired).isRequired\n};\nexport default MusicCard;","map":{"version":3,"names":["PropTypes","React","addSong","getFavoriteSongs","removeSong","Loading","MusicCard","Component","constructor","state","loading","favorites","onClickCheckbox","bind","componentDidMount","recovered","setState","music","some","song","trackId","newFavorites","filter","element","render","musics","props","map","trackName","previewUrl","propTypes","arrayOf","shape","artistId","number","isRequired"],"sources":["/home/viniciuslacerda/Dev/projects/Bloco 12 - TrybeTunes/music-player/src/components/MusicCard.jsx"],"sourcesContent":["/* eslint-disable consistent-return */\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\n\nclass MusicCard extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false,\n      favorites: [],\n    };\n    this.onClickCheckbox = this.onClickCheckbox.bind(this);\n  }\n\n  async componentDidMount() {\n    const recovered = await getFavoriteSongs();\n    this.setState({ favorites: recovered });\n  }\n\n  async onClickCheckbox(music) {\n    const { favorites } = this.state;\n    if (favorites.some((song) => song.trackId === music.trackId)) {\n      this.setState({ loading: true });\n      await removeSong(music);\n      const newFavorites = favorites\n        .filter((element) => element.trackId !== music.trackId);\n      return this.setState({\n        loading: false,\n        favorites: newFavorites,\n      });\n    }\n    this.setState({ loading: true }, async () => {\n      await addSong(music);\n      this.setState({\n        loading: false,\n        favorites: [...favorites, music],\n      });\n    });\n  }\n\n  render() {\n    const { musics } = this.props;\n    const { loading, favorites } = this.state;\n    return (\n      <div className=\"musics-container\">\n        {loading ? (\n          <Loading />\n        ) : (\n          <ul className=\"tracklist\">\n            {musics.map((music) => {\n              const { trackName, trackId, previewUrl } = music;\n              return (\n                <li className=\"track\" key={trackId}>\n                  <div className=\"track-name\">\n                    <p>{ trackName }</p>\n                  </div>\n                  <audio data-testid=\"audio-component\" src={previewUrl} controls>\n                    <track kind=\"captions\" />\n                    O seu navegador n√£o suporta o elemento\n                    <code>audio</code>\n                  </audio>\n                  <label htmlFor=\"isFavorite\">\n                    <input\n                      className=\"track-input\"\n                      data-testid={`checkbox-music-${trackId}`}\n                      type=\"checkbox\"\n                      name=\"isFavorite\"\n                      id=\"isFavorite\"\n                      checked={favorites.some((song) => song.trackId === trackId)}\n                      onChange={() => this.onClickCheckbox(music)}\n                    />\n                  </label>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n\nMusicCard.propTypes = {\n  musics: PropTypes.arrayOf(\n    PropTypes.shape({\n      artistId: PropTypes.number.isRequired,\n    }).isRequired,\n  ).isRequired,\n};\n\nexport default MusicCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}