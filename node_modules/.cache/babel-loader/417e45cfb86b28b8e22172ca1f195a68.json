{"ast":null,"code":"var _jsxFileName = \"/home/viniciuslacerda/Dev/projects/Bloco 12 - TrybeTubes/music-player/src/components/MusicCard.jsx\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from './Loading';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MusicCard extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false,\n      favorites: []\n    };\n    this.onClickCheckbox = this.onClickCheckbox.bind(this);\n  }\n\n  async componentDidMount() {\n    const recovered = await getFavoriteSongs();\n    this.setState({\n      favorites: recovered\n    });\n  }\n\n  async onClickCheckbox(music) {\n    const {\n      favorites\n    } = this.state;\n\n    if (favorites.some(song => song.trackId === music.trackId)) {\n      this.setState({\n        loading: true\n      });\n      await removeSong(music);\n      const newFavorites = favorites.filter(element => element.trackId !== music.trackId);\n      return this.setState({\n        loading: false,\n        favorites: newFavorites\n      });\n    }\n\n    this.setState({\n      loading: true\n    }, async () => {\n      await addSong(music);\n      this.setState({\n        loading: false,\n        favorites: [...favorites, music]\n      });\n    });\n  }\n\n  render() {\n    const {\n      musics\n    } = this.props;\n    const {\n      loading,\n      favorites\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: musics.map(music => {\n          const {\n            trackName,\n            trackId,\n            previewUrl\n          } = music;\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: trackName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n              \"data-testid\": \"audio-component\",\n              src: previewUrl,\n              controls: true,\n              children: [/*#__PURE__*/_jsxDEV(\"track\", {\n                kind: \"captions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 21\n              }, this), \"O seu navegador n\\xE3o suporta o elemento\", /*#__PURE__*/_jsxDEV(\"code\", {\n                children: \"audio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"isFavorite\",\n              children: [\"Favorita\", /*#__PURE__*/_jsxDEV(\"input\", {\n                \"data-testid\": `checkbox-music-${trackId}`,\n                type: \"checkbox\",\n                name: \"isFavorite\",\n                id: \"isFavorite\",\n                checked: favorites.some(song => song.trackId === trackId),\n                onChange: () => this.onClickCheckbox(music)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 19\n            }, this)]\n          }, trackId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nMusicCard.propTypes = {\n  musics: PropTypes.arrayOf(PropTypes.shape({\n    artistId: PropTypes.number.isRequired\n  }).isRequired).isRequired\n};\nexport default MusicCard;","map":{"version":3,"names":["React","PropTypes","Loading","addSong","getFavoriteSongs","removeSong","MusicCard","Component","constructor","state","loading","favorites","onClickCheckbox","bind","componentDidMount","recovered","setState","music","some","song","trackId","newFavorites","filter","element","render","musics","props","map","trackName","previewUrl","propTypes","arrayOf","shape","artistId","number","isRequired"],"sources":["/home/viniciuslacerda/Dev/projects/Bloco 12 - TrybeTubes/music-player/src/components/MusicCard.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from './Loading';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\n\nclass MusicCard extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false,\n      favorites: [],\n    };\n    this.onClickCheckbox = this.onClickCheckbox.bind(this);\n  }\n\n  async componentDidMount() {\n    const recovered = await getFavoriteSongs();\n    this.setState({ favorites: recovered });\n  }\n\n  async onClickCheckbox(music) {\n    const { favorites } = this.state;\n    if (favorites.some((song) => song.trackId === music.trackId)) {\n      this.setState({ loading: true });\n      await removeSong(music);\n      const newFavorites = favorites\n        .filter((element) => element.trackId !== music.trackId);\n      return this.setState({\n        loading: false,\n        favorites: newFavorites,\n      });\n    }\n    this.setState({ loading: true }, async () => {\n      await addSong(music);\n      this.setState({\n        loading: false,\n        favorites: [...favorites, music],\n      });\n    });\n  }\n\n  render() {\n    const { musics } = this.props;\n    const { loading, favorites } = this.state;\n    return (\n      <div>\n        {loading ? (\n          <Loading />\n        ) : (\n          <ul>\n            {musics.map((music) => {\n              const { trackName, trackId, previewUrl } = music;\n              return (\n                <li key={ trackId }>\n                  <p>{ trackName }</p>\n                  <audio data-testid=\"audio-component\" src={ previewUrl } controls>\n                    <track kind=\"captions\" />\n                    O seu navegador n√£o suporta o elemento\n                    <code>audio</code>\n                  </audio>\n                  <label htmlFor=\"isFavorite\">\n                    Favorita\n                    <input\n                      data-testid={ `checkbox-music-${trackId}` }\n                      type=\"checkbox\"\n                      name=\"isFavorite\"\n                      id=\"isFavorite\"\n                      checked={ favorites.some((song) => song.trackId === trackId) }\n                      onChange={ () => this.onClickCheckbox(music) }\n                    />\n                  </label>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n\nMusicCard.propTypes = {\n  musics: PropTypes.arrayOf(\n    PropTypes.shape({\n      artistId: PropTypes.number.isRequired,\n    }).isRequired,\n  ).isRequired,\n};\n\nexport default MusicCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}