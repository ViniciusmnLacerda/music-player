{"ast":null,"code":"var _jsxFileName = \"/home/viniciuslacerda/Dev/projects/Bloco 12 - TrybeTunes/music-player/src/pages/Favorites.jsx\";\n\n/* eslint-disable consistent-return */\nimport propTypes from 'prop-types';\nimport React from 'react';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport '../Styles/Favorites.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Favorites extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      favorites: [],\n      loading: false\n    };\n    this.onClickCheckbox = this.onClickCheckbox.bind(this);\n  }\n\n  async componentDidMount() {\n    this.setState({\n      loading: true\n    }, async () => {\n      const recovered = await getFavoriteSongs();\n      this.setState({\n        loading: false,\n        favorites: recovered\n      });\n    });\n  }\n\n  async onClickCheckbox(music) {\n    const {\n      favorites\n    } = this.state;\n\n    if (favorites.some(song => song.trackId === music.trackId)) {\n      this.setState({\n        loading: true\n      });\n      await removeSong(music);\n      const newFavorites = favorites.filter(element => element.trackId !== music.trackId);\n      return this.setState({\n        loading: false,\n        favorites: newFavorites\n      });\n    }\n  }\n\n  render() {\n    const {\n      loading,\n      favorites\n    } = this.state;\n    const {\n      match\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-favorites\",\n      \"data-testid\": \"page-favorites\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        path: match.url\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"favorites-container\",\n        children: favorites.map(music => {\n          const {\n            artworkUrl100,\n            trackName,\n            previewUrl,\n            trackId\n          } = music;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-favorite\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-favorite-img\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: artworkUrl100,\n                alt: trackName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-favorite-trackname\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: trackName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-favorite-track\",\n              children: /*#__PURE__*/_jsxDEV(\"audio\", {\n                \"data-testid\": \"audio-component\",\n                src: previewUrl,\n                controls: true,\n                children: [/*#__PURE__*/_jsxDEV(\"track\", {\n                  kind: \"captions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 23\n                }, this), \"O seu navegador n\\xE3o suporta o elemento\", /*#__PURE__*/_jsxDEV(\"code\", {\n                  children: \"audio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 72,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"isFavorite\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                \"data-testid\": `checkbox-music-${trackId}`,\n                type: \"checkbox\",\n                name: \"isFavorite\",\n                id: \"isFavorite\",\n                checked: favorites.some(song => song.trackId === trackId),\n                onChange: () => this.onClickCheckbox(music)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 19\n            }, this)]\n          }, trackId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nFavorites.propTypes = {\n  match: propTypes.shape({\n    url: propTypes.string.isRequired\n  }).isRequired\n};\nexport default Favorites;","map":{"version":3,"names":["propTypes","React","Header","Loading","getFavoriteSongs","removeSong","Favorites","Component","constructor","state","favorites","loading","onClickCheckbox","bind","componentDidMount","setState","recovered","music","some","song","trackId","newFavorites","filter","element","render","match","props","url","map","artworkUrl100","trackName","previewUrl","shape","string","isRequired"],"sources":["/home/viniciuslacerda/Dev/projects/Bloco 12 - TrybeTunes/music-player/src/pages/Favorites.jsx"],"sourcesContent":["/* eslint-disable consistent-return */\nimport propTypes from 'prop-types';\nimport React from 'react';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport '../Styles/Favorites.css';\n\nclass Favorites extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      favorites: [],\n      loading: false,\n    };\n    this.onClickCheckbox = this.onClickCheckbox.bind(this);\n  }\n\n  async componentDidMount() {\n    this.setState({ loading: true }, async () => {\n      const recovered = await getFavoriteSongs();\n      this.setState({\n        loading: false,\n        favorites: recovered,\n      });\n    });\n  }\n\n  async onClickCheckbox(music) {\n    const { favorites } = this.state;\n    if (favorites.some((song) => song.trackId === music.trackId)) {\n      this.setState({ loading: true });\n      await removeSong(music);\n      const newFavorites = favorites\n        .filter((element) => element.trackId !== music.trackId);\n      return this.setState({\n        loading: false,\n        favorites: newFavorites,\n      });\n    }\n  }\n\n  render() {\n    const { loading, favorites } = this.state;\n    const { match } = this.props;\n    return (\n      <div className=\"page-favorites\" data-testid=\"page-favorites\">\n        <Header path={match.url} />\n        {loading ? (\n          <Loading />\n        ) : (\n          <div className=\"favorites-container\">\n            {favorites.map((music) => {\n              const {\n                artworkUrl100, trackName, previewUrl, trackId,\n              } = music;\n              return (\n                <div className=\"card-favorite\" key={trackId}>\n                  <div className=\"card-favorite-img\">\n                    <img\n                      src={artworkUrl100}\n                      alt={trackName}\n                    />\n                  </div>\n                  <div className=\"card-favorite-trackname\">\n                    <p>{ trackName }</p>\n                  </div>\n                  <div className=\"card-favorite-track\">\n                    <audio data-testid=\"audio-component\" src={previewUrl} controls>\n                      <track kind=\"captions\" />\n                      O seu navegador n√£o suporta o elemento\n                      <code>audio</code>\n                    </audio>\n                  </div>\n                  <label htmlFor=\"isFavorite\">\n                    <input\n                      data-testid={`checkbox-music-${trackId}`}\n                      type=\"checkbox\"\n                      name=\"isFavorite\"\n                      id=\"isFavorite\"\n                      checked={favorites.some((song) => song.trackId === trackId)}\n                      onChange={() => this.onClickCheckbox(music)}\n                    />\n                  </label>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nFavorites.propTypes = {\n  match: propTypes.shape({\n    url: propTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default Favorites;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}