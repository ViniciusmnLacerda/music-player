{"ast":null,"code":"var _jsxFileName = \"/home/viniciuslacerda/Dev/projects/Bloco 12 - TrybeTubes/music-player/src/pages/Favorites.jsx\";\nimport React from 'react';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Favorites extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      favorites: [],\n      loading: false\n    };\n    this.onClickCheckbox = this.onClickCheckbox.bind(this);\n  }\n\n  async componentDidMount() {\n    this.setState({\n      loading: true\n    }, async () => {\n      const recovered = await getFavoriteSongs();\n      this.setState({\n        loading: false,\n        favorites: recovered\n      });\n    });\n  }\n\n  async onClickCheckbox(music) {\n    const {\n      favorites\n    } = this.state;\n\n    if (favorites.some(song => song.trackId === music.trackId)) {\n      this.setState({\n        loading: true\n      });\n      await removeSong(music);\n      const newFavorites = favorites.filter(element => element.trackId !== music.trackId);\n      return this.setState({\n        loading: false,\n        favorites: newFavorites\n      });\n    }\n  }\n\n  render() {\n    const {\n      loading,\n      favorites\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-testid\": \"page-favorites\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"M\\xFAsicas Favoritas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: favorites.map(music => {\n              const {\n                artworkUrl100,\n                trackName,\n                previewUrl,\n                trackId\n              } = music;\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: artworkUrl100,\n                  alt: trackName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 56,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: trackName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n                  \"data-testid\": \"audio-component\",\n                  src: previewUrl,\n                  controls: true,\n                  children: [/*#__PURE__*/_jsxDEV(\"track\", {\n                    kind: \"captions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 62,\n                    columnNumber: 25\n                  }, this), \"O seu navegador n\\xE3o suporta o elemento\", /*#__PURE__*/_jsxDEV(\"code\", {\n                    children: \"audio\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 64,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 61,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"isFavorite\",\n                  children: [\"Favorita\", /*#__PURE__*/_jsxDEV(\"input\", {\n                    \"data-testid\": `checkbox-music-${trackId}`,\n                    type: \"checkbox\",\n                    name: \"isFavorite\",\n                    id: \"isFavorite\",\n                    checked: favorites.some(song => song.trackId === trackId),\n                    onChange: () => this.onClickCheckbox(music)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 68,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 66,\n                  columnNumber: 23\n                }, this)]\n              }, trackId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Favorites;","map":{"version":3,"names":["React","Header","Loading","getFavoriteSongs","removeSong","Favorites","Component","constructor","state","favorites","loading","onClickCheckbox","bind","componentDidMount","setState","recovered","music","some","song","trackId","newFavorites","filter","element","render","map","artworkUrl100","trackName","previewUrl"],"sources":["/home/viniciuslacerda/Dev/projects/Bloco 12 - TrybeTubes/music-player/src/pages/Favorites.jsx"],"sourcesContent":["import React from 'react';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\n\nclass Favorites extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      favorites: [],\n      loading: false,\n    };\n    this.onClickCheckbox = this.onClickCheckbox.bind(this);\n  }\n\n  async componentDidMount() {\n    this.setState({ loading: true }, async () => {\n      const recovered = await getFavoriteSongs();\n      this.setState({\n        loading: false,\n        favorites: recovered,\n      });\n    });\n  }\n\n  async onClickCheckbox(music) {\n    const { favorites } = this.state;\n    if (favorites.some((song) => song.trackId === music.trackId)) {\n      this.setState({ loading: true });\n      await removeSong(music);\n      const newFavorites = favorites\n        .filter((element) => element.trackId !== music.trackId);\n      return this.setState({\n        loading: false,\n        favorites: newFavorites,\n      });\n    }\n  }\n\n  render() {\n    const { loading, favorites } = this.state;\n    return (\n      <div data-testid=\"page-favorites\">\n        <Header />\n        {loading ? (\n          <Loading />\n        ) : (\n          <div>\n            <p>Músicas Favoritas</p>\n            <div>\n              <ul>\n                {favorites.map((music) => {\n                  const { artworkUrl100, trackName, previewUrl, trackId } = music;\n                  return (\n                    <li key={ trackId }>\n                      <img\n                        src={ artworkUrl100 }\n                        alt={ trackName }\n                      />\n                      <p>{ trackName }</p>\n                      <audio data-testid=\"audio-component\" src={ previewUrl } controls>\n                        <track kind=\"captions\" />\n                        O seu navegador não suporta o elemento\n                        <code>audio</code>\n                      </audio>\n                      <label htmlFor=\"isFavorite\">\n                        Favorita\n                        <input\n                          data-testid={ `checkbox-music-${trackId}` }\n                          type=\"checkbox\"\n                          name=\"isFavorite\"\n                          id=\"isFavorite\"\n                          checked={ favorites.some((song) => song.trackId === trackId) }\n                          onChange={ () => this.onClickCheckbox(music) }\n                        />\n                      </label>\n                    </li>\n                  );\n                })}\n              </ul>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Favorites;\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAASC,gBAAT,EAA2BC,UAA3B,QAA6C,8BAA7C;;;AAEA,MAAMC,SAAN,SAAwBL,KAAK,CAACM,SAA9B,CAAwC;EACtCC,WAAW,GAAG;IACZ;IACA,KAAKC,KAAL,GAAa;MACXC,SAAS,EAAE,EADA;MAEXC,OAAO,EAAE;IAFE,CAAb;IAIA,KAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAvB;EACD;;EAEsB,MAAjBC,iBAAiB,GAAG;IACxB,KAAKC,QAAL,CAAc;MAAEJ,OAAO,EAAE;IAAX,CAAd,EAAiC,YAAY;MAC3C,MAAMK,SAAS,GAAG,MAAMZ,gBAAgB,EAAxC;MACA,KAAKW,QAAL,CAAc;QACZJ,OAAO,EAAE,KADG;QAEZD,SAAS,EAAEM;MAFC,CAAd;IAID,CAND;EAOD;;EAEoB,MAAfJ,eAAe,CAACK,KAAD,EAAQ;IAC3B,MAAM;MAAEP;IAAF,IAAgB,KAAKD,KAA3B;;IACA,IAAIC,SAAS,CAACQ,IAAV,CAAgBC,IAAD,IAAUA,IAAI,CAACC,OAAL,KAAiBH,KAAK,CAACG,OAAhD,CAAJ,EAA8D;MAC5D,KAAKL,QAAL,CAAc;QAAEJ,OAAO,EAAE;MAAX,CAAd;MACA,MAAMN,UAAU,CAACY,KAAD,CAAhB;MACA,MAAMI,YAAY,GAAGX,SAAS,CAC3BY,MADkB,CACVC,OAAD,IAAaA,OAAO,CAACH,OAAR,KAAoBH,KAAK,CAACG,OAD5B,CAArB;MAEA,OAAO,KAAKL,QAAL,CAAc;QACnBJ,OAAO,EAAE,KADU;QAEnBD,SAAS,EAAEW;MAFQ,CAAd,CAAP;IAID;EACF;;EAEDG,MAAM,GAAG;IACP,MAAM;MAAEb,OAAF;MAAWD;IAAX,IAAyB,KAAKD,KAApC;IACA,oBACE;MAAK,eAAY,gBAAjB;MAAA,wBACE,QAAC,MAAD;QAAA;QAAA;QAAA;MAAA,QADF,EAEGE,OAAO,gBACN,QAAC,OAAD;QAAA;QAAA;QAAA;MAAA,QADM,gBAGN;QAAA,wBACE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAA,uBACE;YAAA,UACGD,SAAS,CAACe,GAAV,CAAeR,KAAD,IAAW;cACxB,MAAM;gBAAES,aAAF;gBAAiBC,SAAjB;gBAA4BC,UAA5B;gBAAwCR;cAAxC,IAAoDH,KAA1D;cACA,oBACE;gBAAA,wBACE;kBACE,GAAG,EAAGS,aADR;kBAEE,GAAG,EAAGC;gBAFR;kBAAA;kBAAA;kBAAA;gBAAA,QADF,eAKE;kBAAA,UAAKA;gBAAL;kBAAA;kBAAA;kBAAA;gBAAA,QALF,eAME;kBAAO,eAAY,iBAAnB;kBAAqC,GAAG,EAAGC,UAA3C;kBAAwD,QAAQ,MAAhE;kBAAA,wBACE;oBAAO,IAAI,EAAC;kBAAZ;oBAAA;oBAAA;oBAAA;kBAAA,QADF,4DAGE;oBAAA;kBAAA;oBAAA;oBAAA;oBAAA;kBAAA,QAHF;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA,QANF,eAWE;kBAAO,OAAO,EAAC,YAAf;kBAAA,oCAEE;oBACE,eAAe,kBAAiBR,OAAQ,EAD1C;oBAEE,IAAI,EAAC,UAFP;oBAGE,IAAI,EAAC,YAHP;oBAIE,EAAE,EAAC,YAJL;oBAKE,OAAO,EAAGV,SAAS,CAACQ,IAAV,CAAgBC,IAAD,IAAUA,IAAI,CAACC,OAAL,KAAiBA,OAA1C,CALZ;oBAME,QAAQ,EAAG,MAAM,KAAKR,eAAL,CAAqBK,KAArB;kBANnB;oBAAA;oBAAA;oBAAA;kBAAA,QAFF;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA,QAXF;cAAA,GAAUG,OAAV;gBAAA;gBAAA;gBAAA;cAAA,QADF;YAyBD,CA3BA;UADH;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QALJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EA4CD;;AAhFqC;;AAmFxC,eAAed,SAAf"},"metadata":{},"sourceType":"module"}